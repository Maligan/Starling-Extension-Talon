## Основы

Идея талона будет очень хорошо знакома многим из вас - в основе лежит дерево отображения (да-да точно такое же как нативном флеше либо в старлинге, да и много в каких движках). Но в талоне основной акцент делается на _узел дерева_ и _аттрибут узла_. Давайте подробнее рассмотрим эти два понятия:

* **Узел дерева** - это (НЕОЖИДАННО!) элемент дерева который:
	1. Может содержать дочерние узлы
	2. Имеет *габариты* - прямоугольные границы объекта 
	3. Может иметь подсоединённую *таблицу стилей* и *словарь ресурсов*
	4. Имеет динамический набор *аттрибутов узла*.
* **Аттрибут узла** - это пара ключ\значение где и ключём и значением могут быть *только* строковые выражения.

### Узел дерева
Надеюсь первые два пункта у вас не вызывают вопросов, про то что узел может содержать дочерние узлы (а может и не содержать) следует из самого дерева отображения, а наличие габаритов у объекта тоже логичное требование.

#### Стили и ресурсы
А вот (3) пункт это требование талона: и таблица стилей и таблицы ресурсов - и то и другое это ассоциативные массивы/словари/хэши (или как вы их там можете называть). Разнятся они семантически - в таблицах стилей ключём выступает CSS-селектор, значением - набор строковых пар - ключ значение.

Ключ            | Значение
----            | --------
`button`        | `fontColor = white`<br/>`fontName = Times`<br/>`fontSize = 14px`<br/>`label = $cancel`<br/>`fill = $button_up`
`button:hover`  | `fontColor = silver`
`button:active` | `fontColor = gray`<br/>`fill = $button_down`

А для таблицы ресурсов - ключём выступает строка, а значение - не типизировано (т.е. это может быть число, строка, изображение, звук и т.п.)

Ключ            | Значение
----            | --------
`cancel`        | `Avbryt`
`finish`		| `Fullført`
`button_up`		| `[Texture]`
`button_down`	| `[Texture]`
`on_click`		| `[Sound]`

Таблицы стилей и словари ресурсов имеют схожее поведение - модель распространение по дереву узов:
1. Только одна таблица стилей и один словарь ресурсов может быть подключён к узлу
2. Подключённые стили/ресурсы к узлу становятся дуступными в данном узле
3. Стили/ресурсы доступные в родительском узле доступны во всех дочерних узлах
4. Если стили/ресурсы от предков конфликтуют (имеют одинаковые имена) со стилями/ресурсами подключёнными в дочернем узле - приоритет одаётся ресурсам из дочернего узла.

Проилюстрируеи эту модель на картинке:

![/img/model.png](res_model)

#### Динамический набор аттрибутов
Как было сказано выше аттрибут узла - строковая пара ключ/значение, под словом *динамический набор* предполагается то что у любого узла могут быть любые атрибуты, без исключений, и мало того, они у него есть *всегда*, но вот создаватся и инициализироватся они будут по требованию, т.е. до тех пор пока для отображения или для вашего кода (или талоновского) не понадобится значение аттрибута `attributeName100` он не будет создан и инициализирован.

### Аттрибут узла
Ну что-же мы добрались до второго и последнего основополагающего термина талона. Я уже это говорил, но данная инфомрация очень важна, так что повторюсь:

> Аттрибут - пара ключ/значение, где ключ и значение **всегда** строкового типа. Без исключений. 

Думаю что такое ключ и какие они бывают у вас не вызывает вопросов - это любые строки - вот некоторые которые используются талоном `fontName`, `text`, `gap`, `orientation`.  
А вот значение узла это несколько более интересный вопрос, давайте его рассмотрим.

* * *
TODO
* * *

### Пример 
Ну и для закрепления всего этого дерьма, давайте разберём конкретный пример:

![Message Box example](img/img1.png)

* * *
TODO
* * *
